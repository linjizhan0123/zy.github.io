<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<link rel="stylesheet"  href="css/xx.css" type="text/css"/>
<title>DAY2.CSS</title>
<style>
</style>
</head>
<body>
    <p class="hhh">超级计算器</p>
    <div>
        <table>
            <tr class="ll">
                <td colspan="5">
                    <input type="text"  id="display" readonly>
                </td>
            </tr>
            <tr class="xx">
                <td onclick="count(this)">sin</td>
                <td onclick="handleOutput(this)">π</td>
                <td onclick="count(this)">C</td>
                <td onclick="count(this)">CE</td>
                <td onclick="count(this)">/</td>
            </tr>
            <tr class="xx">
                <td onclick="count(this)">cos</td>
                <td onclick="count(this)">7</td>
                <td onclick="count(this)">8</td>
                <td onclick="count(this)">9</td>
                <td onclick="count(this)">*</td>
            </tr>
            <tr class="xx">
                <td onclick="count(this)">tan</td>
                <td onclick="count(this)">4</td>
                <td onclick="count(this)">5</td>
                <td onclick="count(this)">6</td>
                <td onclick="count(this)">-</td>
            </tr>
            <tr  class="xx">
                <td onclick="count(this)">square</td>
                <td onclick="count(this)">1</td>
                <td onclick="count(this)">2</td>
                <td onclick="count(this)">3</td>
                <td onclick="count(this)">+</td>
            </tr>
            <tr class="xx">
                <td onclick="count(this)">(</td>
                <td onclick="count(this)">)</td>
                <td onclick="count(this)">0</td>
                <td onclick="count(this)">.</td>
                <td onclick="count(this)">=</td>
            </tr>
        </table>
    </div>
    <script>  
        function addToDisplay(element) {  
            var display = document.getElementById('display');  
            display.value += element.textContent; // 追加点击的按钮的内容到显示区域  
        }  
      
        function calculateResult() {  
            var display = document.getElementById('display');  
            var expression = display.value;  
              
            try {  
                // 注意：eval()有安全风险，这里仅作为示例  
                var result = eval(expression);  
                display.value = result; // 显示结果  
            } catch (error) {  
                alert('哎呦！格式有问题请重新修改!');   
            }  
        }  
      
        var buttons = document.querySelectorAll('.xx td'); // 选择所有 .xx 下的 td  
        buttons.forEach(function(button) {  
            button.addEventListener('click', function() {  
                var text = this.textContent;  
                if (text === 'CE') { // 检查是否是 "CE" 按钮  
                    var display = document.getElementById('display');  
                    if (display.value.length > 0) {  
                        display.value = display.value.slice(0, -1); // 清除最后一个字符  
                    }  
                } else if (text === 'C') { // 检查是否是 "C" 按钮  
                    var display = document.getElementById('display');  
                    display.value = ''; // 清除全部输出  
                } else if (['-', '+', '/', '*'].includes(text)) { // 检查是否是运算符  
                    addToDisplay(this);  
                } else if (text === '=') { // 检查是否是等号  
                    calculateResult();  
                } else if (text === 'sin') { // 检查是否是 "sin" 按钮  
                    var display = document.getElementById('display');
                    if (display.value.length > 0) {
                        var inputValue = parseFloat(display.value);
                        var result = Math.sin(inputValue * Math.PI / 180);
                        display.value = result;
                    }
                } else if (text === 'cos') { // 检查是否是 "cos" 按钮  
                    var display = document.getElementById('display');
                    if (display.value.length > 0) {
                        var inputValue = parseFloat(display.value);
                        var result = Math.cos(inputValue * Math.PI / 180);
                        display.value = result;
                    }
                } else if (text === 'tan') { // 检查是否是 "tan" 按钮  
                    var display = document.getElementById('display');
                    if (display.value.length > 0) {
                        var inputValue = parseFloat(display.value);
                        var result = Math.tan(inputValue * Math.PI / 180);
                        display.value = result;
                    }
                } else if (text === 'square') { // 检查是否是 "square" 按钮
                    var display = document.getElementById('display');
                    if (display.value.length > 0) {
                        var inputValue = parseFloat(display.value);
                        var result = Math.pow(inputValue, 2); // 计算平方
                        display.value = result;
                    }
                } else if (text === 'π') { // 检查是否是 "π" 按钮
                    var display = document.getElementById('display');
                    if (display.value.length > 0) {
                        var inputValue = parseFloat(display.value);
                        var result = Math.PI * inputValue;
                        display.value = result;
                    }
                } else {  
                    addToDisplay(this); // 当点击的是其他按钮时，调用 addToDisplay 函数  
                }  
            });  
        });
          
    </script>
</body>
</html>
